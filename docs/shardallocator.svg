<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="689px" preserveAspectRatio="none" style="width:583px;height:689px;" version="1.1" viewBox="0 0 583 689" width="583px" zoomAndPan="magnify"><defs><filter height="300%" id="f1v2ausvuwa2wf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="68" x2="68" y1="38.4883" y2="648.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="318" x2="318" y1="38.4883" y2="648.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="388" x2="388" y1="38.4883" y2="648.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="458" x2="458" y1="38.4883" y2="648.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="537" x2="537" y1="38.4883" y2="648.6992"/><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="15" y="23.5352">ShardAllocator</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="8" y="647.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="15" y="668.2344">ShardAllocator</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="288" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="295" y="23.5352">Core1</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="288" y="647.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="295" y="668.2344">Core1</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="358" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="365" y="23.5352">Core2</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="358" y="647.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="365" y="668.2344">Core2</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="428" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="435" y="23.5352">Core3</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="428" y="647.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="435" y="668.2344">Core3</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="498" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="505" y="23.5352">Core101</text><rect fill="#FEFECE" filter="url(#f1v2ausvuwa2wf)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="498" y="647.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="505" y="668.2344">Core101</text><path d="M8,53.4883 L8,139.4883 L374,139.4883 L374,63.4883 L364,53.4883 L8,53.4883 " fill="#FBFB77" filter="url(#f1v2ausvuwa2wf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M364,53.4883 L364,63.4883 L374,63.4883 L364,53.4883 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="14" y="71.0566">Max Chunk Size: M = 2⁴⁴</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="14" y="86.3672">Number of Shards: N = 100</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="14" y="101.6777">Optimal Chunk Range: 2⁴⁴/N</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="14" y="116.9883">Chunk Range with 10% overlap: R = 1.1 x (2⁴⁴/N)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="345" x="14" y="132.2988">NodeKey Generation Coeff for 10% overlap: C = 0.1 x R</text><polygon fill="#A80036" points="79,166.3516,69,170.3516,79,174.3516,75,170.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="317" y1="170.3516" y2="170.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="85" y="165.6094">GET /shard seed=randomTextHere1</text><polygon fill="#A80036" points="306,195.6621,316,199.6621,306,203.6621,310,199.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="312" y1="199.6621" y2="199.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="75" y="194.9199">[87960930222, 19351404648]</text><path d="M153,212.6621 L153,237.6621 L479,237.6621 L479,222.6621 L469,212.6621 L153,212.6621 " fill="#FBFB77" filter="url(#f1v2ausvuwa2wf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M469,212.6621 L469,222.6621 L479,222.6621 L469,212.6621 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="159" y="230.2305">generate_node_key 87960930222 19351404648</text><polygon fill="#A80036" points="79,264.2832,69,268.2832,79,272.2832,75,268.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="387" y1="268.2832" y2="268.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="85" y="263.541">GET /shard seed=randomTextHere2</text><polygon fill="#A80036" points="376,293.5938,386,297.5938,376,301.5938,380,297.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="382" y1="297.5938" y2="297.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="75" y="292.8516">[263882790666, 19351404648]</text><path d="M219,310.5938 L219,335.5938 L553,335.5938 L553,320.5938 L543,310.5938 L219,310.5938 " fill="#FBFB77" filter="url(#f1v2ausvuwa2wf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M543,310.5938 L543,320.5938 L553,320.5938 L543,310.5938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="225" y="328.1621">generate_node_key 263882790666 19351404648</text><polygon fill="#A80036" points="79,362.2148,69,366.2148,79,370.2148,75,366.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="457" y1="366.2148" y2="366.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="85" y="361.4727">GET /shard seed=randomTextHere3</text><polygon fill="#A80036" points="446,391.5254,456,395.5254,446,399.5254,450,395.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="452" y1="395.5254" y2="395.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="75" y="390.7832">[439804651110, 19351404648]</text><path d="M219,408.5254 L219,433.5254 L553,433.5254 L553,418.5254 L543,408.5254 L219,408.5254 " fill="#FBFB77" filter="url(#f1v2ausvuwa2wf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M543,408.5254 L543,418.5254 L553,418.5254 L543,408.5254 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="225" y="426.0938">generate_node_key 439804651110 19351404648</text><polygon fill="#A80036" points="79,460.1465,69,464.1465,79,468.1465,75,464.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="536" y1="464.1465" y2="464.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="85" y="459.4043">GET /shard seed=randomTextHere101</text><polygon fill="#A80036" points="525,489.457,535,493.457,525,497.457,529,493.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="531" y1="493.457" y2="493.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="75" y="488.7148">[87960930222, 19351404648]</text><path d="M223,506.457 L223,531.457 L549,531.457 L549,516.457 L539,506.457 L223,506.457 " fill="#FBFB77" filter="url(#f1v2ausvuwa2wf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M539,506.457 L539,516.457 L549,516.457 L539,506.457 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="229" y="524.0254">generate_node_key 87960930222 19351404648</text><polygon fill="#A80036" points="79,558.0781,69,562.0781,79,566.0781,75,562.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="317" y1="562.0781" y2="562.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="85" y="557.3359">GET /shard seed=randomTextHere1</text><polygon fill="#A80036" points="306,587.3887,316,591.3887,306,595.3887,310,591.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="312" y1="591.3887" y2="591.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="75" y="586.6465">[87960930222, 19351404648]</text><path d="M223,604.3887 L223,629.3887 L549,629.3887 L549,614.3887 L539,604.3887 L223,604.3887 " fill="#FBFB77" filter="url(#f1v2ausvuwa2wf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M539,604.3887 L539,614.3887 L549,614.3887 L539,604.3887 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="229" y="621.957">generate_node_key 87960930222 19351404648</text><!--
@startuml
note over ShardAllocator, Core1
    Max Chunk Size: M = 2⁴⁴
    Number of Shards: N = 100
    Optimal Chunk Range: 2⁴⁴/N
    Chunk Range with 10% overlap: R = 1.1 x (2⁴⁴/N)
    NodeKey Generation Coeff for 10% overlap: C = 0.1 x R
end note

Core1 -> ShardAllocator : GET /shard seed=randomTextHere1
Core1 <- ShardAllocator: [87960930222, 19351404648]
note over Core1: generate_node_key 87960930222 19351404648

Core2 -> ShardAllocator : GET /shard seed=randomTextHere2
Core2 <- ShardAllocator: [263882790666, 19351404648]
note over Core2: generate_node_key 263882790666 19351404648

Core3 -> ShardAllocator : GET /shard seed=randomTextHere3
Core3 <- ShardAllocator: [439804651110, 19351404648]
note over Core2: generate_node_key 439804651110 19351404648

Core101 -> ShardAllocator : GET /shard seed=randomTextHere101
Core101 <- ShardAllocator: [87960930222, 19351404648]
note over Core2: generate_node_key 87960930222 19351404648

Core1 -> ShardAllocator : GET /shard seed=randomTextHere1
Core1 <- ShardAllocator: [87960930222, 19351404648]
note over Core2: generate_node_key 87960930222 19351404648

@enduml

PlantUML version 1.2019.03(Sun Mar 10 12:04:44 CET 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_181-b13
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: US-ASCII
Language: en
Country: SE
--></g></svg>